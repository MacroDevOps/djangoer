# Generated by Django 3.2.14 on 2022-07-20 06:42

from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='ChordCounter',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('group_id', models.CharField(db_index=True, help_text='Celery ID for the Chord header group', max_length=255, unique=True, verbose_name='Group ID')),
                ('sub_tasks', models.TextField(help_text='JSON serialized list of task result tuples. use .group_result() to decode')),
                ('count', models.PositiveIntegerField(help_text='Starts at len(chord header) and decrements after each task is finished')),
            ],
        ),
        migrations.CreateModel(
            name='TaskResult',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('task_id', models.CharField(db_index=True, help_text='Celery正在运行的任务的ID', max_length=255, unique=True, verbose_name='任务ID')),
                ('task_args', models.TextField(help_text='给任务队列传入的位置参数名: 顺序传参', null=True, verbose_name='任务位置参数')),
                ('task_name', models.CharField(db_index=True, help_text='运行celery是的任务名', max_length=255, null=True, verbose_name='任务名')),
                ('task_kwargs', models.TextField(help_text='传入的命名参数名: 命名传参', null=True, verbose_name='任务命名参数')),
                ('status', models.CharField(choices=[('FAILURE', 'FAILURE'), ('PENDING', 'PENDING'), ('RECEIVED', 'RECEIVED'), ('RETRY', 'RETRY'), ('REVOKED', 'REVOKED'), ('STARTED', 'STARTED'), ('SUCCESS', 'SUCCESS')], db_index=True, default='PENDING', help_text='正在运行的任务的当前状态', max_length=50, verbose_name='任务状态')),
                ('worker', models.CharField(db_index=True, default=None, help_text='执行任务的Worker', max_length=100, null=True, verbose_name='Worker')),
                ('content_type', models.CharField(help_text='结果数据的内容类型', max_length=128, verbose_name='结果内容类型')),
                ('content_encoding', models.CharField(help_text='保存任务结果数据的编码方式', max_length=64, verbose_name='结果编码')),
                ('result', models.TextField(default=None, editable=False, help_text='任务返回的数据，使用content_encoding和content_type字段读取。', null=True, verbose_name='结果数据')),
                ('date_created', models.DateTimeField(auto_now_add=True, db_index=True, help_text='当任务结果以UTC创建时的Datetime字段', verbose_name='创建时间')),
                ('date_done', models.DateTimeField(auto_now=True, db_index=True, help_text='当任务以UTC完成时的Datetime字段', verbose_name='完成日期时间')),
                ('traceback', models.TextField(blank=True, help_text='如果任务生成回溯文本，则返回该文本', null=True, verbose_name='回调')),
                ('meta', models.TextField(default=None, editable=False, help_text='关于任务的JSON元信息例如关于儿童任务的信息', null=True, verbose_name='任务元信息')),
            ],
            options={
                'verbose_name': 'task result',
                'verbose_name_plural': '任务结果',
                'ordering': ['-date_done'],
            },
        ),
    ]
